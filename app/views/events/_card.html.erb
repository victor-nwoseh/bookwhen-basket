<div class="event-card <%= 'event-card--in-basket' if in_basket %>">
  <div class="event-card__header">
    <span class="event-card__category"><%= event.category %></span>
    <span class="event-card__price">£<%= "%.2f" % event.price_pounds %></span>
  </div>

  <h2 class="event-card__title"><%= event.title %></h2>

  <div class="event-card__meta">
    <span class="event-card__instructor"><%= event.instructor %></span>
    <span class="event-card__location"><%= event.location %></span>
  </div>

  <div class="event-card__time">
    <span class="event-card__date"><%= event.start_time.strftime("%A %-d %B") %></span>
    <span class="event-card__hours"><%= event.start_time.strftime("%H:%M") %> – <%= event.end_time.strftime("%H:%M") %></span>
  </div>

  <div class="event-card__footer">
    <% if event.sold_out? %>
      <span class="event-card__sold-out">Sold out</span>
    <% elsif in_basket %>
      <span class="event-card__in-basket-label">Added ✓</span>
      <%= button_to "Remove",
            basket_item_path(current_basket.basket_items.find_by(event: event)),
            method: :delete,
            class: "btn btn--remove",
            data: { turbo_stream: true } %>
    <% else %>
      <%= button_to "Add to basket",
            basket_items_path,
            params: { event_id: event.id },
            class: "btn btn--add",
            data: { turbo_stream: true } %>
    <% end %>
    <span class="event-card__spots">
      <% if event.sold_out? %>
        No spaces left
      <% else %>
        <%= event.spots_remaining %> <%= "space".pluralize(event.spots_remaining) %> left
      <% end %>
    </span>
  </div>
</div>
